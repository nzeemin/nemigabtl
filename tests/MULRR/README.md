
https://zx-pk.ru/threads/20590-emulyator-nemiga.html?p=892874&viewfull=1#post892874
Alex_K:
<blockquote>
Насчет показа вряд ли, вариантов много. Но вот для сбора статистики сделал.<br/>
Вроде я понял, что смогли присоединить HX к Немиге, отлично, понадобится много места.<br/>
Программа <b>MULRR</b> собирает статистику по исполнению команды <b>MUL</b> на основе алгоритма проверки правильности исполнения команд программы <b>TSTVM2</b> под авторством <b>Titus</b>-а.<br/>
Собственно параметры программы настраиваются в блоке 1 с помощью DESS-а. Смещения относительно начала:<br/>
1000 Код проверяемой команды, это команда MUL, работающая с регистрами R0 и R1, т.е. всего 4 варианта - MUL R0,R0(070000), MUL R0,R1 (070100), MUL R1,R0 (070001), MUL R1,R1 (070101).<br/>
1002 Начальное значение PSW, стоит 0, вообще-то смысла не имеет, но в тесте используется.<br/>
1004-1012 Имя получаемого файла в RADIX-50<br/>
В программе делается 16384 различные итерации с разными аргументами, всё это записывается в файл результата. Длина записи одной итерации составляет 8 слов - первые 4 слова это значения R0, R1, R2 и PSW до операции, следующие 4 слова - значения этих регистров после операции. Соответственно размер записываемого файла составляет 512 блоков. Значения R2 до и после должно быть одинаковым, но мало ли что, потому и пишется.

В архиве две настроенные программы MUL01 (MUL R0,R1, файл DK:MUL01.DAT) и MUL10 (MUL R1,R0, файл DK:MUL10.DAT). С помощью них можно получить результаты для 1801ВМ2 (например в эмуляторе), потом получить результаты с Немиги, ну а потом сравнить. Для эмуляторописателя эта статистика лучше, чем программа с выводом на экран, есть уже многочисленные результаты, анализируй, сравнивай. При записи каждого блока программа выводит точку на экран, т.е. если всё пройдет без ошибок, то выведется 512 точек.
</blockquote>

https://zx-pk.ru/threads/20590-emulyator-nemiga.html?p=892929&viewfull=1#post892929
Alex_K:
<blockquote>
По итогам анализа этого файла различия между ВМ2 и Немигой проявляются только при получении результата 32767, т.е. при умножении (-1)*(-32767) или 1*32767. Сам результат получается аналогичный, но на Немиге в этом случае почему-то устанавливается флаг C в PSW.<br/>
Ждём с нетерпением MUL10.DAT.
</blockquote>

https://zx-pk.ru/threads/20590-emulyator-nemiga.html?p=892933&viewfull=1#post892933
Alex_K:
<blockquote>
Аналогично, как и по MUL01.DAT - при получении в качестве результата 32767 - устанавливается флаг C в PSW.
</blockquote>
